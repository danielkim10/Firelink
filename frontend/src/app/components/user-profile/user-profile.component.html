<div>
    <mat-card class="center">
        <mat-card-content>
            <div>
                <div class="col s12">
                    <mat-tab-group>
                        <mat-tab label="Overview">
                            <div *ngIf="!editMode">
                                <div>
                                    <div fxFlex="50%">
                                        <div class="label-spacing">
                                            <img src="assets/avatar_placeholder.png" width="200" height="200">
                                        </div>
                                        <div class="label-spacing">
                                            <img src="assets/twitch-icon.jpg" width="50" height="50" matTooltip={{user.twitchUrl}}>
                                            <img src="assets/twitter-icon.png" width="50" height="50" matTooltip={{user.twitterUrl}}>
                                            <img src="assets/youtube-icon.png" width="50" height="50" matTooltip={{user.youtubeUrl}}>
                                            <img src="assets/discord-icon.jpg" width="50" height="50" matTooltip={{user.discordTag}}>
                                        </div>
                                        <div>
                                            <h2>{{user.username}}</h2>
                                        </div>
                                        <div class="label-spacing">
                                            <label>Email: {{user.email}}</label>
                                        </div>
                                        <div class="label-spacing">
                                            <label>Role: {{user?.role?.name}}</label>
                                        </div>
                                        <div class="label-spacing">
                                            <label>Description: {{user.description}}</label>
                                        </div>
                                    </div>
                                    <div fxFlex="50%">
                                        <div class="label-spacing">
                                            <label>Summoner Name: {{user.summonerName}}</label>
                                        </div>
                                        <div class="label-spacing">
                                            <label>Team: {{user?.team?.tag}} - {{user?.team?.name}}</label>
                                        </div>
                                        <div class="label-spacing">
                                            <label>Free agent: {{user.freeAgent}}</label>
                                        </div>
                                        <div class="label-spacing">
                                            <label>Summoner Level: {{user.summonerLevel}}</label>
                                        </div>
                                        <div class="label-spacing">
                                            <label>Profile Icon Id: {{user.profileIconId}}</label>
                                        </div>
                                        <div class="label-spacing">
                                            <label>Last Updated: {{user.lastUpdated}}</label>
                                        </div>
                                        <div class="label-spacing">
                                            <label>Solo Tier: {{user.soloTier}}</label>
                                        </div>
                                        <div class="label-spacing">
                                            <label>Solo Rank: {{user.soloRank}}</label>
                                        </div>
                                        <div class="label-spacing">
                                            <label>Solo LP: {{user.soloLP}}</label>
                                        </div>
                                        <div class="label-spacing">
                                            <label>Solo Wins: {{user.soloWins}}</label>
                                        </div>
                                        <div class="label-spacing">
                                            <label>Solo Losses: {{user.soloLosses}}</label>
                                        </div>
                                        <div class="label-spacing">
                                            <label>Flex Tier: {{user.flexTier}}</label>
                                        </div>
                                        <div class="label-spacing">
                                            <label>Flex Rank: {{user.flexRank}}</label>
                                        </div>
                                        <div class="label-spacing">
                                            <label>Flex LP: {{user.flexLP}}</label>
                                        </div>
                                        <div class="label-spacing">
                                            <label>Flex Wins: {{user.flexWins}}</label>
                                        </div>
                                        <div class="label-spacing">
                                            <label>Flex Losses: {{user.flexLosses}}</label>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <button mat-flat-button color="warn" type="button" (click)="openDialog(user, 'deactivate')">Deactivate</button>
                                    <button mat-flat-button color="accent" type="button" (click)="home()">Home</button>
                                    <button mat-flat-button color="primary" type="button" *ngIf="!editMode" (click)="editProfile()">Edit</button>
                                </div>
                            </div>

                            <div *ngIf="editMode">
                                <form #editProfileForm="ngForm" (ngSubmit)="onSubmit(editProfileForm)">
                                    <div>
                                        <mat-form-field>
                                            <mat-label>Username</mat-label>
                                            <input matInput type="text" name="username" #name="ngModel" [(ngModel)]="userEdit.username" value={{userEdit.username}}>
                                        </mat-form-field>
                                    </div>
                                    <div>
                                        <mat-form-field>
                                            <mat-label>Email</mat-label>
                                            <input matInput type="text" name="email" #name="ngModel" [(ngModel)]="userEdit.email" value={{userEdit.email}}> 
                                        </mat-form-field>
                                    </div>
                                    <div>
                                        <mat-form-field>
                                            <mat-label>Role</mat-label>
                                            <mat-select name="role" #name="ngModel" [(ngModel)]="userEdit.role" [(value)]="userEdit.role">
                                                <mat-option *ngFor="let role of roles" [value]="role._id">
                                                    {{role.name}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                                    <div>
                                        <mat-form-field>
                                            <mat-label>Description</mat-label>
                                            <textarea matInput name="description" #name="ngModel" [(ngModel)]="userEdit.description" value={{userEdit.description}}></textarea>
                                        </mat-form-field>
                                    </div>
                                    <div>
                                        <mat-form-field>
                                            <mat-label>Summoner Name</mat-label>
                                            <input matInput name="summonerName" #name="ngModel" [(ngModel)]="userEdit.summonerName" type="text" value={{userEdit.summonerName}}>
                                        </mat-form-field>
                                    </div>
                                    <div>
                                        <mat-form-field>
                                            <mat-label>Twitch URL</mat-label>
                                            <input matInput name="twitchUrl" #name="ngModel" [(ngModel)]="userEdit.twitchUrl" type="text" value={{userEdit.twitchUrl}} placeholder="URL">
                                        </mat-form-field>
                                    </div>
                                    <div>
                                        <mat-form-field>
                                            <mat-label>Twitter URL</mat-label>
                                            <input matInput name="twitterUrl" #name="ngModel" [(ngModel)]="userEdit.twitterUrl" type="text" value={{userEdit.twitterUrl}} placeholder="URL">
                                        </mat-form-field>
                                    </div>
                                    <div>
                                        <mat-form-field>
                                            <mat-label>Youtube URL</mat-label>
                                            <input matInput name="youtubeUrl" #name="ngModel" [(ngModel)]="userEdit.youtubeUrl" type="text" value={{userEdit.youtubeUrl}} placeholder="URL">
                                        </mat-form-field>
                                    </div>
                                    <div>
                                        <mat-form-field>
                                            <mat-label>Discord Tag</mat-label>
                                            <input matInput name="discordTag" #name="ngModel" [(ngModel)]="userEdit.discordTag" type="text" value={{userEdit.discordTag}} placeholder="URL">
                                        </mat-form-field>
                                    </div>
                                    
                                    <div>
                                            <label>Free Agent</label>
                                            <mat-checkbox name="freeAgent" #name="ngModel" [(ngModel)]="userEdit.freeAgent"></mat-checkbox>
                                    </div>
                                    <div>
                                        <button mat-flat-button color="warn" type="button" (click)="stopEditing()">Back</button>
                                        <button mat-flat-button color="primary" type="submit">Save</button>
                                    </div>
                                </form>
                            </div>

                        </mat-tab>
                        <mat-tab label="History">
                            <div>
                                <mat-card>
                                    <mat-card-header>
                                        <mat-card-title>Team History</mat-card-title>
                                    </mat-card-header>
                                    <mat-card-content>
                                        <table mat-table [dataSource]="previousTeams">
                                            <ng-container matColumnDef="icon">
                                                <th mat-header-cell *matHeaderCellDef>Icon</th>
                                                <td mat-cell *matCellDef="let team">{{team.icon}}</td>
                                            </ng-container>
                                            <ng-container matColumnDef="tag">
                                                <th mat-header-cell *matHeaderCellDef>Tag</th>
                                                <td mat-cell *matCellDef="let team">{{team.tag}}</td>
                                            </ng-container>
                                            <ng-container matColumnDef="name">
                                                <th mat-header-cell *matHeaderCellDef>Name</th>
                                                <td mat-cell *matCellDef="let team">{{team.name}}</td>
                                            </ng-container>
                                            <ng-container matColumnDef="joinDate">
                                                <th mat-header-cell *matHeaderCellDef>Date Joined</th>
                                                <td mat-cell *matCellDef="let team">{{team.startDate}}</td>
                                            </ng-container>
                                            <ng-container matColumnDef="leftDate">
                                                <th mat-header-cell *matHeaderCellDef>Date Left</th>
                                                <td mat-cell *matCellDef="let team">{{team.endDate}}</td>
                                            </ng-container>
                                            <ng-container matColumnDef="action">
                                                <th mat-header-cell *matHeaderCellDef>Actions</th>
                                                <td mat-cell *matCellDef="let team">
                                                    <button mat-icon-button [matMenuTriggerFor]="menu">
                                                        <mat-icon>more_vert</mat-icon>
                                                    </button>
                                                    <mat-menu #menu="matMenu">
                                                        <button mat-menu-item>
                                                            <mat-icon>remove_red_eye</mat-icon>
                                                            <span>View Team</span>
                                                        </button>
                                                    </mat-menu>
                                                </td>
                                            </ng-container>
                                            <tr mat-header-row *matHeaderRowDef="displayedColumnsTeams"></tr>
                                            <tr mat-row *matRowDef="let row; columns: displayedColumnsTeams;"></tr>
                                        </table>
                                        <mat-paginator class="mat-paginator"></mat-paginator>
                                    </mat-card-content>
                                </mat-card>
                            </div>
                            <div>
                                <mat-card>
                                    <mat-card-header>
                                        <mat-card-title>Tournament History</mat-card-title>
                                    </mat-card-header>
                                    <mat-card-content>
                                        <table mat-table [dataSource]="previousTournaments">
                                            <ng-container matColumnDef="name">
                                                <th mat-header-cell *matHeaderCellDef>Name</th>
                                                <td mat-cell *matCellDef="let tournament">{{tournament.name}}</td>
                                            </ng-container>
                                            <ng-container matColumnDef="place">
                                                <th mat-header-cell *matHeaderCellDef>Place</th>
                                                <td mat-cell *matCellDef="let tournament">{{tournament.place}}</td>
                                            </ng-container>
                                            <ng-container matColumnDef="startDate">
                                                <th mat-header-cell *matHeaderCellDef>Start Date</th>
                                                <td mat-cell *matCellDef="let tournament">{{tournament.startDate}}</td>
                                            </ng-container>
                                            <ng-container matColumnDef="endDate">
                                                <th mat-header-cell *matHeaderCellDef>End Date</th>
                                                <td mat-cell *matCellDef="let tournament">{{tournament.endDate}}</td>
                                            </ng-container>
                                            <ng-container matColumnDef="action">
                                                <th mat-header-cell *matHeaderCellDef>Actions</th>
                                                <td mat-cell *matCellDef="let tournament">
                                                    <button mat-icon-button [matMenuTriggerFor]="menu">
                                                        <mat-icon>more_vert</mat-icon>
                                                    </button>
                                                    <mat-menu #menu="matMenu">
                                                        <button mat-menu-item>
                                                            <mat-icon>remove_red_eye</mat-icon>
                                                            <span>View Tournament</span>
                                                        </button>
                                                    </mat-menu>
                                                </td>
                                            </ng-container>
                                            <tr mat-header-row *matHeaderRowDef="displayedColumnsTourn"></tr>
                                            <tr mat-row *matRowDef="let row; columns: displayedColumnsTourn;"></tr>
                                        </table>
                                        <mat-paginator class="mat-paginator"></mat-paginator>
                                    </mat-card-content>
                                </mat-card>
                            </div>
                            <div>
                                <mat-card>
                                    <mat-card-header>
                                        <mat-card-title>Match History</mat-card-title>
                                    </mat-card-header>
                                    <mat-card-content>
                                        <table mat-table [dataSource]="previousMatches">
                                            <ng-container matColumnDef="name">
                                                <th mat-header-cell *matHeaderCellDef>Name</th>
                                                <td mat-cell *matCellDef="let match">{{match.name}}</td>
                                            </ng-container>
                                            <ng-container matColumnDef="tournament">
                                                <th mat-header-cell *matHeaderCellDef>Tournament</th>
                                                <td mat-cell *matCellDef="let match">{{match.tournament}}</td>
                                            </ng-container>
                                            <ng-container matColumnDef="date">
                                                <th mat-header-cell *matHeaderCellDef>Date</th>
                                                <td mat-cell *matCellDef="let match">{{match.date}}</td>
                                            </ng-container>
                                            <ng-container matColumnDef="action">
                                                <th mat-header-cell *matHeaderCellDef>Actions</th>
                                                <td mat-cell *matCellDef="let match">
                                                    <button mat-icon-button [matMenuTriggerFor]="menu">
                                                        <mat-icon>more_vert</mat-icon>
                                                    </button>
                                                    <mat-menu #menu="matMenu">
                                                        <button mat-menu-item>
                                                            <mat-icon>remove_red_eye</mat-icon>
                                                            <span>View Match</span>
                                                        </button>
                                                    </mat-menu>
                                                </td>
                                            </ng-container>
                                            <tr mat-header-row *matHeaderRowDef="displayedColumnsMatch"></tr>
                                            <tr mat-row *matRowDef="let row; columns: displayedColumnsMatch;"></tr>
                                        </table>
                                        <mat-paginator class="mat-paginator"></mat-paginator>
                                    </mat-card-content>
                                </mat-card>
                            </div>
                        </mat-tab>
                        <mat-tab label="Notifications">
                            <div>

                                <mat-drawer-container class="drawer" autosize>
                                    <mat-drawer mode="side" opened>
                                        <mat-tab-group>
                                            <mat-tab label="Notifications">
                                                <mat-selection-list #notifications1 [multiple]="false">
                                                    <mat-list-option *ngFor="let notification of notifications" [value]="notification">
                                                        <h3 matLine>{{notification.subject}}</h3>
                                                        <p matLine>{{notification.message}}</p>
                                                    </mat-list-option>
                                                </mat-selection-list>
                                            </mat-tab>
                                            <mat-tab label="Invites">
                                                <mat-selection-list #invites [multiple]="false">
                                                    <mat-list-option *ngFor="let invite of user.incomingInvites" [value]="invite" class="mat-item">
                                                        <h3 matLine>{{invite.subject}}</h3>
                                                        <p matLine>{{invite.message}}</p>
                                                    </mat-list-option>
                                                </mat-selection-list>
                                            </mat-tab>
                                        </mat-tab-group>
                                    </mat-drawer>
                                    <mat-drawer-content class="drawer-content">
                                        <div *ngIf="!invites.selectedOptions.selected[0]" class="default-text">
                                            Select a notification or invite to view its contents
                                        </div>
                                        <div *ngIf="invites.selectedOptions.selected[0]" class="default-text">
                                            <div>
                                                <p>Subject: {{invites.selectedOptions.selected[0]?.value.subject}}</p>
                                            </div>
                                            <div>
                                                <p>Message: {{invites.selectedOptions.selected[0]?.value.message}}</p>
                                            </div>
                                            <div>
                                                <button mat-flat-button color="warn" type="button" (click)="declineInvite(invites.selectedOptions.selected[0]?.value)">Decline</button>
                                                <button mat-flat-button color="primary" type="button" (click)="acceptInvite(invites.selectedOptions.selected[0]?.value)">Accept</button>
                                            </div>
                                        </div>
                                    </mat-drawer-content>
                                </mat-drawer-container>
                            </div>
                        </mat-tab>
                        <mat-tab label="Settings">
                            <div>
                                <label>Settings</label>
                            </div>
                        </mat-tab>
                    </mat-tab-group>
                </div>
            </div>
        </mat-card-content>
    </mat-card>
</div>
